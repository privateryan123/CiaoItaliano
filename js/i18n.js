/* ============================================
   Italiano Ogni Giorno â€” Internationalization
   ============================================ */

const I18n = {
  currentLang: 'en',

  translations: {
    en: {
      // Header
      appTitle: 'Italiano Ogni Giorno',
      appSubtitle: 'Your daily companion for Italian',
      
      // Navigation
      navSentences: 'Sentences',
      navStory: 'Story',
      navNews: 'News',
      navVerbs: 'Verbs',
      navTranslate: 'Translate',
      navMore: 'More',
      
      // Sentences View
      dailySentences: 'Daily Sentences',
      noSentencesAvailable: 'No sentences available for this day.',
      previousDay: 'Previous day',
      nextDay: 'Next day',
      saveSentence: 'Save sentence',
      
      // Story View
      dailyStory: 'Daily Story',
      noStoryAvailable: 'No story available for this day.',
      useArrowsToNavigate: 'Use the arrows to navigate to other days.',
      pages: 'Pages',
      page: 'Page',
      back: 'Back',
      next: 'Next',
      
      // News View
      newsFromItaly: 'News from Italy',
      noNewsAvailable: 'No news available for this day.',
      news: 'News',
      
      // Verbs View
      verbs: 'Verbs',
      practiceVerbs: 'Practice Verbs',
      selectVerbToPractice: 'Select a verb and practice with example sentences',
      selectVerb: 'Select a verb:',
      preparedSentences: 'Prepared Sentences',
      learnWithThematic: 'Learn with thematic sentence collections',
      selectTopic: 'Select a topic:',
      sentences: 'sentences',
      
      // Translator View
      translatorDictionary: 'Translator & Dictionary',
      enterSentenceOrWord: 'Enter sentence or wordâ€¦',
      translate: 'Translate',
      clear: 'Clear',
      saveToVocab: 'Save to vocabulary',
      save: 'Save',
      wordReference: 'WordReference',
      wordRefDescription: 'Detailed word meanings, conjugations and example sentences from WordReference.',
      enterItalianWord: 'Enter Italian wordâ€¦',
      lookup: 'Look up',
      savedSentences: 'Saved Sentences',
      savedWords: 'Saved Words',
      noSentencesSaved: 'No sentences saved yet.',
      noWordsSaved: 'No words saved yet.',
      tapToSaveSentence: 'Tap ğŸ”– on a sentence to save it here.',
      tapWordToSave: 'Tap on a word in the text to save it.',
      remove: 'Remove',
      lookupInWordRef: 'Look up in WordReference',
      
      // More View
      more: 'More',
      archive: 'Archive',
      browsePassedLessons: 'Browse past lessons',
      settings: 'Settings',
      settingsDescription: 'Level, topics, API & design',
      madeWithLove: 'Made with â¤ï¸ for everyone who loves Italian.',
      
      // Library View
      backToArchive: 'Back to Archive',
      noPastDaysAvailable: 'No past days available yet.',
      
      // Vocabulary View
      vocabulary: 'Vocabulary',
      words: 'Words',
      
      // Settings View
      backBtn: 'Back',
      learningLevel: 'Learning Level',
      yourLevel: 'Your level',
      sentencesPerDay: 'Sentences per Day',
      numberOfSentences: 'Number of daily sentences',
      topics: 'Topics',
      yourInterests: 'Your interests',
      selected: 'selected',
      display: 'Display',
      showExplanations: 'Show explanations',
      appearance: 'Appearance',
      light: 'Light',
      dark: 'Dark',
      automatic: 'Automatic',
      language: 'Language',
      appLanguage: 'App language',
      english: 'English',
      german: 'German',
      
      // Topic labels
      topicEveryday: 'ğŸ  Everyday',
      topicTravel: 'âœˆï¸ Travel',
      topicCulture: 'ğŸ¨ Culture',
      topicWork: 'ğŸ’¼ Work',
      topicFood: 'ğŸ Food & Drink',
      topicSports: 'âš½ Sports',
      topicFamily: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family',
      topicChildren: 'ğŸ‘¶ Children',
      topicHomeGarden: 'ğŸ¡ Home & Garden',
      topicCar: 'ğŸš— Car',
      topicHobbies: 'ğŸ¯ Hobbies',
      
      // Toast messages
      pleaseEnterText: 'Please enter text',
      translationFailed: 'Translation failed',
      translationSaved: 'Translation saved! ğŸ”–',
      alreadySaved: 'Already saved',
      pleaseEnterWord: 'Please enter a word',
      wordSaved: 'Word saved! ğŸ’¬',
      sentenceSaved: 'Sentence saved! ğŸ”–',
      sentenceRemoved: 'Sentence removed',
      wordRemoved: 'Word removed',
      levelSetTo: 'Level set to',
      sentencesPerDaySet: 'sentences per day',
      
      // Misc
      notFound: 'Not found.'
    },
    
    de: {
      // Header
      appTitle: 'Italiano Ogni Giorno',
      appSubtitle: 'Dein tÃ¤glicher Begleiter fÃ¼r Italienisch',
      
      // Navigation
      navSentences: 'SÃ¤tze',
      navStory: 'Story',
      navNews: 'Nachrichten',
      navVerbs: 'Verben',
      navTranslate: 'Ãœbersetz',
      navMore: 'Mehr',
      
      // Sentences View
      dailySentences: 'TagessÃ¤tze',
      noSentencesAvailable: 'Keine SÃ¤tze fÃ¼r diesen Tag verfÃ¼gbar.',
      previousDay: 'Vorheriger Tag',
      nextDay: 'NÃ¤chster Tag',
      saveSentence: 'Satz speichern',
      
      // Story View
      dailyStory: 'Tagesgeschichte',
      noStoryAvailable: 'FÃ¼r diesen Tag gibt es noch keine Geschichte.',
      useArrowsToNavigate: 'Nutze die Pfeile, um zu anderen Tagen zu navigieren.',
      pages: 'Seiten',
      page: 'Seite',
      back: 'ZurÃ¼ck',
      next: 'Weiter',
      
      // News View
      newsFromItaly: 'Nachrichten aus Italien',
      noNewsAvailable: 'FÃ¼r diesen Tag gibt es noch keine Nachrichten.',
      news: 'Nachrichten',
      
      // Verbs View
      verbs: 'Verben',
      practiceVerbs: 'Verben Ã¼ben',
      selectVerbToPractice: 'WÃ¤hle ein Verb und Ã¼be mit BeispielsÃ¤tzen',
      selectVerb: 'Verb auswÃ¤hlen:',
      preparedSentences: 'Vorbereitete SÃ¤tze',
      learnWithThematic: 'Lerne mit thematischen Satzsammlungen',
      selectTopic: 'Thema wÃ¤hlen:',
      sentences: 'SÃ¤tze',
      
      // Translator View
      translatorDictionary: 'Ãœbersetzer & WÃ¶rterbuch',
      enterSentenceOrWord: 'Satz oder Wort eingebenâ€¦',
      translate: 'Ãœbersetzen',
      clear: 'LÃ¶schen',
      saveToVocab: 'In Vokabeln speichern',
      save: 'Speichern',
      wordReference: 'WordReference',
      wordRefDescription: 'Detaillierte Wortbedeutungen, Konjugationen und BeispielsÃ¤tze von WordReference.',
      enterItalianWord: 'Italienisches Wort eingebenâ€¦',
      lookup: 'Nachschlagen',
      savedSentences: 'Gespeicherte SÃ¤tze',
      savedWords: 'Gespeicherte WÃ¶rter',
      noSentencesSaved: 'Noch keine SÃ¤tze gespeichert.',
      noWordsSaved: 'Noch keine WÃ¶rter gespeichert.',
      tapToSaveSentence: 'Tippe auf ğŸ”– bei einem Satz, um ihn hier zu speichern.',
      tapWordToSave: 'Tippe auf ein Wort im Text, um es zu speichern.',
      remove: 'Entfernen',
      lookupInWordRef: 'In WordReference nachschlagen',
      
      // More View
      more: 'Mehr',
      archive: 'Archiv',
      browsePassedLessons: 'Vergangene Lektionen durchstÃ¶bern',
      settings: 'Einstellungen',
      settingsDescription: 'Level, Themen, API & Design',
      madeWithLove: 'Mit â¤ï¸ fÃ¼r alle, die Italienisch lieben.',
      
      // Library View
      backToArchive: 'ZurÃ¼ck zum Archiv',
      noPastDaysAvailable: 'Noch keine vergangenen Tage verfÃ¼gbar.',
      
      // Vocabulary View
      vocabulary: 'Vokabeln',
      words: 'WÃ¶rter',
      
      // Settings View
      backBtn: 'ZurÃ¼ck',
      learningLevel: 'Lernniveau',
      yourLevel: 'Dein Level',
      sentencesPerDay: 'SÃ¤tze pro Tag',
      numberOfSentences: 'Anzahl TagessÃ¤tze',
      topics: 'Themen',
      yourInterests: 'Deine Interessen',
      selected: 'ausgewÃ¤hlt',
      display: 'Anzeige',
      showExplanations: 'ErklÃ¤rungen anzeigen',
      appearance: 'Erscheinungsbild',
      light: 'Hell',
      dark: 'Dunkel',
      automatic: 'Automatisch',
      language: 'Sprache',
      appLanguage: 'App-Sprache',
      english: 'Englisch',
      german: 'Deutsch',
      
      // Topic labels
      topicEveryday: 'ğŸ  Alltag',
      topicTravel: 'âœˆï¸ Reisen',
      topicCulture: 'ğŸ¨ Kultur',
      topicWork: 'ğŸ’¼ Beruf',
      topicFood: 'ğŸ Essen & Trinken',
      topicSports: 'âš½ Sport',
      topicFamily: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Familie',
      topicChildren: 'ğŸ‘¶ Kinder',
      topicHomeGarden: 'ğŸ¡ Haus & Garten',
      topicCar: 'ğŸš— Auto',
      topicHobbies: 'ğŸ¯ Hobbies',
      
      // Toast messages
      pleaseEnterText: 'Bitte Text eingeben',
      translationFailed: 'Ãœbersetzung fehlgeschlagen',
      translationSaved: 'Ãœbersetzung gespeichert! ğŸ”–',
      alreadySaved: 'Bereits gespeichert',
      pleaseEnterWord: 'Bitte ein Wort eingeben',
      wordSaved: 'Wort gespeichert! ğŸ’¬',
      sentenceSaved: 'Satz gespeichert! ğŸ”–',
      sentenceRemoved: 'Satz entfernt',
      wordRemoved: 'Wort entfernt',
      levelSetTo: 'Level auf',
      sentencesPerDaySet: 'SÃ¤tze pro Tag',
      
      // Misc
      notFound: 'Nicht gefunden.'
    }
  },

  init() {
    this.currentLang = Store.getLanguage();
    this.updateUI();
  },

  t(key) {
    return this.translations[this.currentLang]?.[key] || this.translations['en'][key] || key;
  },

  setLanguage(lang) {
    this.currentLang = lang;
    Store.setLanguage(lang);
    this.updateUI();
  },

  updateUI() {
    // Update header
    const headerTitle = document.querySelector('.header-title');
    const headerSubtitle = document.getElementById('header-subtitle');
    if (headerTitle) headerTitle.innerHTML = '<span class="header-flag">ğŸ‡®ğŸ‡¹</span> ' + this.t('appTitle');
    if (headerSubtitle) headerSubtitle.textContent = this.t('appSubtitle');

    // Update navigation
    const navItems = document.querySelectorAll('.nav-item');
    const navKeys = ['navSentences', 'navStory', 'navNews', 'navVerbs', 'navTranslate', 'navMore'];
    navItems.forEach((item, i) => {
      const span = item.querySelector('span:not(.nav-icon)');
      if (span && navKeys[i]) {
        span.textContent = this.t(navKeys[i]);
      }
    });
  },

  getTopicLabel(topicId) {
    const topicMap = {
      'Alltag': 'topicEveryday',
      'Reisen': 'topicTravel',
      'Kultur': 'topicCulture',
      'Beruf': 'topicWork',
      'Essen': 'topicFood',
      'Sport': 'topicSports',
      'Familie': 'topicFamily',
      'Kinder': 'topicChildren',
      'Haus und Garten': 'topicHomeGarden',
      'Auto': 'topicCar',
      'Hobbies': 'topicHobbies'
    };
    return this.t(topicMap[topicId] || topicId);
  }
};
